<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba de Apertura - ONLYOFFICE Docs</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #placeholder { height: 100%; }
    </style>
    <!-- El editor se sirve desde el mismo servidor, en el puerto 80 -->
    <script type="text/javascript" src="http://localhost:8080/web-apps/apps/api/documents/api.js"></script>
</head>
<body>
    <div id="placeholder"></div>
    <script type="text/javascript">
        // Configuración mínima para abrir un documento en modo visualización
        const config = {
            "document": {
                "fileType": "docx",
                "key": "solo_abrir_mi_doc_003", // Nueva key para evitar caché
                "title": "dockerdocu.docx",
                
                // El documento es servido por el mismo servidor en el puerto 80
                // gracias al montaje de volumen de Docker.
                "url": "http://localhost:8080/dockerdocu.docx"
            },
            "documentType": "word",
            "editorConfig": {
                // Al poner 'mode' en 'view', desactivamos la edición y
                // la necesidad de un callbackUrl.
                "mode": "view", 
                "lang": "es",
                "user": {
                    "id": "user-viewer",
                    "name": "Espectador de Prueba"
                }
            },
            // Asumimos que el contenedor Docker se inició con JWT_ENABLED=false
            "token": ""
        };

        try {
            // Inicializamos el editor con la configuración mínima
            var docEditor = new DocsAPI.DocEditor("placeholder", config);
            console.log("Editor inicializado en modo VISTA.");
        } catch (e) {
            console.error("Error al inicializar el editor:", e);
        }
    </script>
</body>
</html>